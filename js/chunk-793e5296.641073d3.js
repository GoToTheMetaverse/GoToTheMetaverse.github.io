(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-793e5296"],{"96d3":function(e,t,r){"use strict";r.r(t);var n=r("7a23"),i={class:"justify-center w-full"},a=Object(n["h"])("div",{class:"flex justify-center"},"EDIT PIC",-1),c={class:"flex justify-center"},s={class:"text-red-600"},o={class:"w-96 h-96"},u={ref:"myiframe",src:"/kbEditPic/main.html",width:"100%",height:"100%",scrolling:"no",frameborder:"0"};function d(e,t,r,d,l,f){return Object(n["q"])(),Object(n["d"])("div",i,[a,Object(n["h"])("div",c,[Object(n["h"])("div",s,Object(n["x"])(l.errorMessage),1),Object(n["h"])("div",o,[Object(n["h"])("iframe",u,"\n        ",512)])])])}var l=r("1da1"),f=(r("96cf"),r("d3b7"),r("25f0"),r("a15b"),{data:function(){return{loadingPic:!1,loadingSuccess:!1,errorMessage:""}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a,c,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t.join("")},n=e.$store,i=e.$refs.myiframe.contentWindow,a=localStorage.getItem("loginToken"),c=n.getters.userUid,s=e.$route.params.pic_uid,console.log("EditPic",s,n.getters.userUid),window.addEventListener("message",function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(o){var u,d,l,f,p,g,b,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(void 0!==o.data.cmd){t.next=2;break}return t.abrupt("return");case 2:if(u=o.data,"kbEditPic.loadingComplete"!=u.cmd){t.next=19;break}return t.next=6,n.wait(1e3);case 6:return d={api:"getPicture",loginToken:a,userUid:c,picUid:s},t.next=9,n.callAsync(d);case 9:if(l=t.sent,100==l.code){t.next=13;break}return e.errorMessage=l.message,t.abrupt("return");case 13:for(console.log("getPicture res",l),f=[],p=0;p<l.picture.pic_data.length;p++)g=l.picture.pic_data[p],f.push(parseInt(g,16));i.postMessage({cmd:"kbEditPic.firstData",tiles:f},"*"),t.next=31;break;case 19:if("kbEditPic.save"!=u.cmd){t.next=30;break}return b={api:"savePicture",loginToken:a,userUid:c,picUid:s,picTileText:r(u.tiles)},t.next=23,n.callAsync(b);case 23:if(m=t.sent,100==m.code){t.next=27;break}return e.errorMessage=m.message,t.abrupt("return");case 27:i.postMessage({cmd:"kbEditPic.saveComplete"},"*"),t.next=31;break;case 30:console.error("EditPci unknown cmd",u.cmd);case 31:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 8:case"end":return t.stop()}}),t)})))()}});f.render=d;t["default"]=f},a15b:function(e,t,r){"use strict";var n=r("23e7"),i=r("44ad"),a=r("fc6a"),c=r("a640"),s=[].join,o=i!=Object,u=c("join",",");n({target:"Array",proto:!0,forced:o||!u},{join:function(e){return s.call(a(this),void 0===e?",":e)}})},a640:function(e,t,r){"use strict";var n=r("d039");e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){throw 1},1)}))}}}]);
//# sourceMappingURL=chunk-793e5296.641073d3.js.map