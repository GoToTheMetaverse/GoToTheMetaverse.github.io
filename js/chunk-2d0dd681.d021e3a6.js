(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0dd681"],{"80f9":function(e,t,r){"use strict";r.r(t);r("b0c0");var a=r("7a23"),n={class:"tw-rounded bg-white mb-2"},i={class:"flex justify-center"},c={class:"w-full py-2 md:px-5"},s={class:"flex justify-between items-center px-3 md:p-0"},o=Object(a["h"])("img",{src:"/images/hero-back.svg",alt:"back"},null,-1),l={key:0,class:"mx-2 text-2xl"},d=Object(a["h"])("img",{class:"w-6 h-6",src:"/images/hero-edit.svg"},null,-1),u={key:3},m=Object(a["h"])("img",{class:"w-8 h-8",src:"/images/hero-confirm-outline.svg"},null,-1),b=Object(a["h"])("img",{class:"w-8 h-8",src:"/images/hero-x-outline.svg"},null,-1),h={key:0,class:"text-red-600 pb-2"},g={class:"pb-0 md:pb-5 px-0 md:px-5"},f={class:"flex justify-center item-start"},p={class:"tw-rounded bg-white p-2"},w={class:"mb-2 flex justify-center items-center"},j=Object(a["h"])("div",null,"내꺼만 표시",-1),O={key:0,class:"mb-2 flex justify-center"},k={class:"grid grid-cols-3 gap-1 px-2"},x={class:"font-bold"};function v(e,t,r,v,S,E){return Object(a["q"])(),Object(a["d"])(a["a"],null,[Object(a["h"])("div",n,[Object(a["h"])("div",i,[Object(a["h"])("div",c,[Object(a["h"])("div",s,[Object(a["h"])("button",{class:"w-6 h-6 mr-2",onClick:t[1]||(t[1]=function(t){return e.$router.back()})},[o]),S.isEditingName?Object(a["e"])("",!0):(Object(a["q"])(),Object(a["d"])("div",l,Object(a["z"])(S.name),1)),!S.isEditingName&&S.name.length>0?(Object(a["q"])(),Object(a["d"])("button",{key:1,class:"px-2 mx-2",onClick:t[2]||(t[2]=function(e){return E.onEditName()})},[d])):Object(a["e"])("",!0),S.isEditingName?Object(a["F"])((Object(a["q"])(),Object(a["d"])("input",{key:2,class:"rounded-lg border-2 border-black px-2","onUpdate:modelValue":t[3]||(t[3]=function(e){return S.inputName=e})},null,512)),[[a["C"],S.inputName]]):Object(a["e"])("",!0),S.isEditingName?(Object(a["q"])(),Object(a["d"])("div",u,[Object(a["h"])("button",{onClick:t[4]||(t[4]=function(e){return E.onEditNameConfirm()}),class:"ml-2"},[m]),Object(a["h"])("button",{onClick:t[5]||(t[5]=function(t){return e.onEditNameCancel()}),class:"ml-2"},[b])])):Object(a["e"])("",!0)])])]),S.errorMessage.length>0?(Object(a["q"])(),Object(a["d"])("div",h,Object(a["z"])(S.errorMessage),1)):Object(a["e"])("",!0),Object(a["h"])("div",g,[Object(a["h"])("div",f,[Object(a["h"])("iframe",{class:"tw-rounded overflow-hidden",ref:"myiframe",src:"/kbEditWall/main.html",width:S.frameWidth,height:S.frameHeight,scrolling:"no",frameborder:"0"},"\n        ",8,["width","height"])])])]),Object(a["h"])("div",p,[Object(a["h"])("div",w,[Object(a["F"])(Object(a["h"])("input",{class:"w-4 h-4 mr-2",type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=function(e){return S.isShowMine=e})},null,512),[[a["B"],S.isShowMine]]),j]),S.isShowMine?Object(a["e"])("",!0):(Object(a["q"])(),Object(a["d"])("div",O,[Object(a["F"])(Object(a["h"])("input",{class:"mr-2 px-2 rounded-lg border-2 border-black","onUpdate:modelValue":t[7]||(t[7]=function(e){return S.inputSearch=e})},null,512),[[a["C"],S.inputSearch]]),S.loadingSearch?Object(a["e"])("",!0):(Object(a["q"])(),Object(a["d"])("button",{key:0,class:"px-4 py-1 rounded-lg bg-indigo-600 text-white",onClick:t[8]||(t[8]=function(e){return E.onSearch()})}," 검색 "))])),Object(a["h"])("div",k,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["w"])(E.listPic,(function(t){return Object(a["q"])(),Object(a["d"])("div",{class:"w-24",key:t.rid,onClick:function(e){return E.onSearchSelect(t)}},[Object(a["h"])("img",{class:"h-24",src:e.$store.makePicUrl(t.pic_url)},null,8,["src"]),Object(a["h"])("div",x,Object(a["z"])(t.pic_name),1)],8,["onClick"])})),128))]),S.isSearchMore?(Object(a["q"])(),Object(a["d"])("button",{key:1,class:"px-4 py-1 rounded-lg bg-indigo-600 text-white",onClick:t[9]||(t[9]=function(e){return E.onSearchMore()})}," 더보기 ")):Object(a["e"])("",!0)])],64)}var S=r("1da1"),E=(r("96cf"),{data:function(){return{iframeWin:null,wallRid:0,name:"",loading:!1,loadingSuccess:!1,errorMessage:"",frameWidth:"100%",frameHeight:"100%",isEditingName:!1,inputName:"",loadingEditName:!1,isShowMine:!0,inputSearch:"",loadingSearch:!1,errorMessageSearch:"",isSearchMore:!1,searchDatas:[]}},mounted:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("WallEdit mounted"),e.iframeWin=e.$refs.myiframe.contentWindow,e.wallRid=parseInt(e.$route.params.rid,10),e.searchDatas=[],window.addEventListener("message",e.procMessage);case 5:case"end":return t.stop()}}),t)})))()},computed:{listPic:function(){return this.isShowMine?Array.isArray(this.$store.state.listPicture)?this.$store.state.listPicture:[]:this.searchDatas}},methods:{procMessage:function(e){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function r(){var a,n,i,c,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(void 0!==e.data.cmd){r.next=2;break}return r.abrupt("return");case 2:if(!(e.data.cmd.indexOf("kbEditWall")<0)){r.next=4;break}return r.abrupt("return");case 4:if(a=e.data,console.log("WallEdit.vue procMessage",a),"kbEditWall.loadingComplete"!=a.cmd){r.next=21;break}return r.next=9,t.$store.wait(1e3);case 9:return n={api:"getWall",loginToken:localStorage.getItem("loginToken"),userUid:t.$store.getters.userUid,wallRid:t.wallRid,needPic:null===t.$store.state.listPicture},r.next=12,t.$store.callAsync(n);case 12:if(i=r.sent,100==i.code){r.next=16;break}return t.errorMessage=i.message,r.abrupt("return");case 16:console.log("getWall res",i),t.name=i.wall.wall_name,t.$store.postMessage(t.iframeWin,{cmd:"kbEditWall.firstData",wall_data:i.wall.wall_data}),r.next=42;break;case 21:if("kbEditWall.frameSize"!=a.cmd){r.next=27;break}console.log("frameSize",a.w,a.h),t.frameWidth=a.w,t.frameHeight=a.h,r.next=42;break;case 27:if("kbEditWall.save"!=a.cmd){r.next=41;break}return console.log("kbEditWall.save",a),r.next=31,t.$store.wait(1e3);case 31:return c={api:"saveWall",loginToken:localStorage.getItem("loginToken"),userUid:t.$store.getters.userUid,wallRid:t.wallRid,width:a.width,height:a.height,arrid:a.arrid,arrimg:a.arrimg},r.next=34,t.$store.callAsync(c);case 34:if(s=r.sent,100==s.code){r.next=38;break}return t.errorMessage=s.message,r.abrupt("return");case 38:t.$store.postMessage(t.iframeWin,{cmd:"kbEditWall.saveComplete"}),r.next=42;break;case 41:console.error("WallEdit unknown cmd",a.cmd);case 42:case"end":return r.stop()}}),r)})))()},onEditName:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isEditingName=!0,e.inputName=e.name;case 2:case"end":return t.stop()}}),t)})))()},onEditNameConfirm:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={api:"updateWallName",loginToken:localStorage.getItem("loginToken"),userUid:e.$store.getters.userUid,wallRid:e.wallRid,newWallName:e.inputName},console.log("onEditNameConfirm",r),e.errorMessage="",e.loadingEditName=!0,t.next=6,e.$store.callAsync(r);case 6:if(a=t.sent,e.loadingEditName=!1,100==a.code){t.next=11;break}return e.errorEditName=a.message,t.abrupt("return");case 11:console.log("onEditNameConfirm res",a),e.$store.commit("updateWall",{rid:e.wallRid,wall_name:a.newWallName}),e.name=a.newWallName,e.isEditingName=!1;case 15:case"end":return t.stop()}}),t)})))()},onEditPicNameCancel:function(){this.isEditingName=!1},onSearch:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={api:"searchImage",loginToken:localStorage.getItem("loginToken"),userUid:e.$store.getters.userUid,inputSearch:e.inputSearch},console.log("onSearch req",r),e.errorMessageSearch="",e.isSearchMore=!1,e.loadingSearch=!0,t.next=7,e.$store.callAsync(r);case 7:if(a=t.sent,e.loadingSearch=!1,100==a.code){t.next=12;break}return e.errorMessageSearch=a.message,t.abrupt("return");case 12:console.log("onSearch res",a),e.searchDatas=a.searchDatas,e.isSearchMore=a.isSearchMore;case 15:case"end":return t.stop()}}),t)})))()},onSearchMore:function(){},onSearchSelect:function(e){console.log("onClickSearch",e),this.$store.postMessage(this.iframeWin,{cmd:"kbEditWall.addImage",id:e.rid,url:e.pic_url})}}});E.render=v;t["default"]=E}}]);
//# sourceMappingURL=chunk-2d0dd681.d021e3a6.js.map