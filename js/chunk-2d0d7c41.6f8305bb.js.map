{"version":3,"sources":["webpack:///./src/views/PicHome.vue","webpack:///./src/views/PicHome.vue?7730"],"names":["class","src","$store","getters","isLogin","loadingPicture","state","listPicture","data","key","rid","onEdit","makePicUrl","pic_url","onDelete","pic_name","getAgo","last_edit","inputPictureName","onAdd","errorMessage","length","name","loading","loadingAddName","loadingDelete","mounted","console","log","reqData","api","loginToken","localStorage","getItem","userUid","callAsync","res","code","message","commit","methods","inputName","newPicture","picUid","pic","i","$router","push","render"],"mappings":"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","file":"js/chunk-2d0d7c41.6f8305bb.js","sourcesContent":["<template>\n  <div class=\"rounded-lg bg-indigo-200 p-2\">\n    <div v-if=\"!$store.getters.isLogin\">\n      <div>타일을 만들 수 있고</div>\n      <div>(제작중) 내 그림에 타일을 불일 수 있습니다.</div>\n      <div>(제작중) 내 그림에 다른 유저의 타일도 붙일 수 있습니다.</div>\n      <div>\n        현재는 guest 계정을 이용중입니다. <br />\n        guest 계정은 모든 방문자가 데이터를 같이 공유합니다. 데이터가 삭제되거나\n        변경될 수 있으니 저장이 필요하시면 가입 해주세요\n      </div>\n    </div>\n\n    <div v-if=\"loadingPicture\">\n      <div class=\"pt-4 px-5\">\n        <div class=\"p-2 rounded-lg bg-white font-bold text-2xl\">내 타일</div>\n      </div>\n\n      <div\n        class=\"py-4 px-5 grid gap-5 lg:grid-cols-4 md:grid-cols-3 grid-cols-2\"\n      >\n        <div\n          class=\"flex bg-white rounded-lg overflow-hidden\"\n          v-for=\"data in $store.state.listPicture\"\n          :key=\"data.rid\"\n        >\n          <button class=\"flex\" @click=\"onEdit(data.rid)\">\n            <img class=\"h-20\" :src=\"$store.makePicUrl(data.pic_url)\" />\n          </button>\n          <div class=\"w-full p-1\">\n            <div class=\"flex justify-end float-right\">\n              <button class=\"w-6 h-6\" @click=\"onDelete(data.rid)\">\n                <img src=\"/images/hero-x.svg\" />\n              </button>\n            </div>\n\n            <div class=\"flex justify-between\">\n              <div class=\"px-1 font-bold text-2xl\">\n                {{ data.pic_name }}\n              </div>\n            </div>\n            <div class=\"flex px-1\">\n              <div class=\"px-2 rounded-full bg-gray-600 text-white\">\n                <small>{{ $store.getAgo(data.last_edit) }}</small>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div v-if=\"false\">\n        <div class=\"flex justify-between p-1\">\n          <div class=\"w-16\">번호</div>\n          <div class=\"w-48\">이름</div>\n          <div class=\"w-12\">사진</div>\n          <div class=\"w-32\">기능</div>\n        </div>\n        <div\n          v-for=\"data in $store.state.listPicture\"\n          :key=\"data.rid\"\n          class=\"flex justify-between p-1\"\n        >\n          <div class=\"w-16 px-2 py-1\">{{ data.rid }}</div>\n          <div class=\"w-48 px-2 py-1\">\n            {{ data.pic_name }}\n          </div>\n          <div class=\"w-12 px-2 py-1\">\n            <img :src=\"$store.makePicUrl(data.pic_url)\" class=\"w-full h-full\" />\n          </div>\n          <div class=\"flex w-32 justify-end m-1\">\n            <button\n              class=\"px-2 py-1 bg-indigo-600 text-white\"\n              @click=\"onEdit(data.rid)\"\n            >\n              수정\n            </button>\n            <button\n              class=\"px-2 py-1 ml-1 bg-red-600 text-white\"\n              @click=\"onDelete(data.uid)\"\n            >\n              X\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"px-5\">\n      <div class=\"flex justify-center items-center p-2 rounded-lg bg-white\">\n        <div class=\"p-1\">새 타일 이름</div>\n        <input\n          v-model=\"inputPictureName\"\n          class=\"mx-2 p-1 rounded-lg border-2 border-black\"\n        />\n        <button\n          class=\"px-2 py-1 rounded-lg bg-indigo-600 text-white\"\n          @click=\"onAdd()\"\n        >\n          추가\n        </button>\n      </div>\n    </div>\n\n    <div v-if=\"errorMessage.length > 0\" class=\"pt-4 px-5\">\n      <div class=\"p-2 rounded-lg bg-white text-red-600 font-bold\">\n        {{ errorMessage }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Home\",\n  data() {\n    return {\n      loading: false,\n      errorMessage: \"\",\n      loadingPicture: false, // true : 로그되었다.\n      inputPictureName: \"\",\n      loadingAddName: false,\n      loadingDelete: false,\n    };\n  },\n  async mounted() {\n    console.log(\"Home mounted\");\n\n    if (this.$store.state.listPicture === null) {\n      // 리스트가 없으면 불러온다.\n      const reqData = {\n        api: \"getPictureList\",\n        loginToken: localStorage.getItem(\"loginToken\"),\n        userUid: this.$store.getters.userUid,\n      };\n      // console.log(\"getPictureList req\", reqData);\n\n      this.loading = true;\n      const res = await this.$store.callAsync(reqData);\n      this.loading = false;\n\n      if (res.code != 100) {\n        console.log(\"getPictureList fail\", res);\n        this.errorMessage = res.message;\n        return;\n      }\n\n      console.log(\"getPictureList ok\", reqData, res);\n      this.$store.commit(\"setListPicture\", res.listPicture);\n      this.loadingPicture = true;\n    } else {\n      this.loadingPicture = true;\n    }\n  },\n  methods: {\n    async onAdd() {\n      if (this.loadingAddName) {\n        return;\n      }\n\n      const reqData = {\n        api: \"addPicture\",\n        loginToken: localStorage.getItem(\"loginToken\"),\n        userUid: this.$store.getters.userUid,\n        inputName: this.inputPictureName,\n      };\n\n      console.log(\"addPicture req\", res);\n      this.loadingAddName = true;\n      const res = await this.$store.callAsync(reqData);\n      this.loadingAddName = false;\n\n      console.log(\"addPicture res\", res);\n      if (res.code != 100) {\n        this.errorMessage = res.message;\n        return;\n      }\n\n      this.$store.commit(\"addPicture\", res.newPicture);\n      this.inputPictureName = \"\";\n    },\n    async onEdit(picUid) {\n      console.log(\"onEdit\", picUid);\n\n      let pic = null;\n      for (let i = 0; i < this.$store.state.listPicture.length; i++) {\n        const data = this.$store.state.listPicture[i];\n        if (data.rid !== picUid) {\n          continue;\n        }\n        pic = data;\n        break;\n      }\n\n      if (pic === null) {\n        console.log(\"not found pic\", picUid);\n        return;\n      }\n\n      this.$router.push(`/tile/edit/${pic.rid}`);\n    },\n    async onDelete(picUid) {\n      console.log(\"onDelete\", picUid);\n\n      const reqData = {\n        api: \"delPicture\",\n        loginToken: localStorage.getItem(\"loginToken\"),\n        userUid: this.$store.getters.userUid,\n        picUid: picUid,\n      };\n\n      // console.log(\"delPicture req\", reqData);\n\n      this.loadingAddName = true;\n      const res = await this.$store.callAsync(reqData);\n      this.loadingAddName = false;\n\n      // console.log(\"delPicture res\", res);\n\n      if (res.code != 100) {\n        this.errorMessage = res.message;\n        return;\n      }\n\n      this.$store.commit(\"delPicture\", picUid);\n      this.inputPictureName = \"\";\n    },\n  },\n};\n</script>\n","import { render } from \"./PicHome.vue?vue&type=template&id=38475828\"\nimport script from \"./PicHome.vue?vue&type=script&lang=js\"\nexport * from \"./PicHome.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}