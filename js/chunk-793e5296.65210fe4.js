(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-793e5296"],{"96d3":function(e,t,r){"use strict";r.r(t);var n=r("7a23"),i={class:"w-full rounded-lg bg-white p-2"},a={class:"justify-center w-full"},c=Object(n["h"])("div",{class:"flex justify-center"},"EDIT PIC",-1),s={class:"flex justify-center"},o={class:"text-red-600"},u={class:"w-96 h-96"},d={ref:"myiframe",src:"/kbEditPic/main.html",width:"100%",height:"100%",scrolling:"no",frameborder:"0"};function l(e,t,r,l,f,p){return Object(n["q"])(),Object(n["d"])("div",i,[Object(n["h"])("div",a,[c,Object(n["h"])("div",s,[Object(n["h"])("div",o,Object(n["x"])(f.errorMessage),1),Object(n["h"])("div",u,[Object(n["h"])("iframe",d,"\n          ",512)])])])])}var f=r("1da1"),p=(r("96cf"),r("d3b7"),r("25f0"),r("a15b"),{data:function(){return{loadingPic:!1,loadingSuccess:!1,errorMessage:""}},mounted:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a,c,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r].toString(16);t.push(0==n?" ":n)}return t.join("")},n=e.$store,i=e.$refs.myiframe.contentWindow,a=localStorage.getItem("loginToken"),c=n.getters.userUid,s=e.$route.params.picUid,console.log("PicEdit",s,n.getters.userUid),window.addEventListener("message",function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(o){var u,d,l,f,p,g,b,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(void 0!==o.data.cmd){t.next=2;break}return t.abrupt("return");case 2:if(u=o.data,"kbEditPic.loadingComplete"!=u.cmd){t.next=19;break}return t.next=6,n.wait(1e3);case 6:return d={api:"getPicture",loginToken:a,userUid:c,picUid:s},t.next=9,n.callAsync(d);case 9:if(l=t.sent,100==l.code){t.next=13;break}return e.errorMessage=l.message,t.abrupt("return");case 13:for(console.log("getPicture res",l),f=[],p=0;p<l.picture.pic_data.length;p++)g=l.picture.pic_data[p]," "==g?f.push(0):f.push(parseInt(g,16));i.postMessage({cmd:"kbEditPic.firstData",tiles:f},"*"),t.next=32;break;case 19:if("kbEditPic.save"!=u.cmd){t.next=31;break}return b={api:"savePicture",loginToken:a,userUid:c,picUid:s,colors:u.colors,picTileText:r(u.tiles)},t.next=23,n.callAsync(b);case 23:if(m=t.sent,100==m.code){t.next=27;break}return e.errorMessage=m.message,t.abrupt("return");case 27:e.$store.commit("updatePicture",m.picture),i.postMessage({cmd:"kbEditPic.saveComplete"},"*"),t.next=32;break;case 31:console.error("EditPci unknown cmd",u.cmd);case 32:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 8:case"end":return t.stop()}}),t)})))()}});p.render=l;t["default"]=p},a15b:function(e,t,r){"use strict";var n=r("23e7"),i=r("44ad"),a=r("fc6a"),c=r("a640"),s=[].join,o=i!=Object,u=c("join",",");n({target:"Array",proto:!0,forced:o||!u},{join:function(e){return s.call(a(this),void 0===e?",":e)}})},a640:function(e,t,r){"use strict";var n=r("d039");e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){throw 1},1)}))}}}]);
//# sourceMappingURL=chunk-793e5296.65210fe4.js.map